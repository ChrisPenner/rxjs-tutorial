<form (submit)="search()">
    <div>
        <input name="topic" placeholder="Topic" [(ngModel)]="topic" [ngModelOptions]="{standalone: true}">
        <input type="submit" value="Search" />
    </div>
    <label> Filter by Language
    <select [(ngModel)]="languageFilter" [ngModelOptions]="{standalone: true}" (change)="changeLanguageFilter($event.target.value)">
        <option [selected]="true" value="">All</option>
      <option>Python</option>
      <option>Java</option>
      <option>TypeScript</option>
      <option>Ruby</option>
      <option>Haskell</option>
      <option>C</option>
      <option>JavaScript</option>
      <option>Go</option>
      </select>
    </label>
</form>
<ng-container *ngIf="!(filteredReposX.loading$ | async); else loading">
    <span *ngFor="let lang of languageCounts$ | async">{{lang.language}}: {{lang.count}}, </span>

    <table>
        <tr>
            <th>Name</th>
            <th>Author</th>
            <th>Description</th>
            <th>Topics</th>
        </tr>
        <tr *ngFor="let repo of filteredReposX.results$ | async">
            <td><a [href]="repo.url">{{repo.name}}</a></td>
            <td>{{repo.author}}</td>
            <td>{{repo.description}}</td>
            <td>{{repo.topics.join(', ')}}</td>
        </tr>
    </table>
</ng-container>

<ng-template #loading>
    Loading...
</ng-template>